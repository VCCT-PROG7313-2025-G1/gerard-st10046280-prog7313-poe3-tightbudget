package com.example.tightbudget.utils

import android.widget.TextView

/**
 * Utility class for emoji icons in the TightBudget app
 * This class provides methods to get emojis for different categories,
 * This class was generated by ChatGPT and was edited by me to match the app's needs.
 */
object EmojiUtils {

    // Category Emojis - Main reference for all category emojis
    private const val EMOJI_HOUSING = "ğŸ "
    private const val EMOJI_FOOD = "ğŸ”"
    private const val EMOJI_TRANSPORT = "ğŸš—"
    private const val EMOJI_ENTERTAINMENT = "ğŸ¬"
    private const val EMOJI_SHOPPING = "ğŸ›ï¸"
    private const val EMOJI_UTILITIES = "ğŸ’¡"
    private const val EMOJI_HEALTH = "ğŸ’Š"
    private const val EMOJI_OTHER = "ğŸ“‹"
    private const val EMOJI_INCOME = "ğŸ’°"
    private const val EMOJI_UNKNOWN = "ğŸ“"

    // Standard text spacing between emoji and text
    private const val EMOJI_TEXT_SPACING = " "

    // Category maps for fuzzy matching
    private val categoryEmojiMap = mapOf(
        "housing" to EMOJI_HOUSING,
        "home" to EMOJI_HOUSING,
        "rent" to EMOJI_HOUSING,
        "mortgage" to EMOJI_HOUSING,
        "apartment" to EMOJI_HOUSING,
        "utilities" to EMOJI_UTILITIES,
        "electricity" to EMOJI_UTILITIES,
        "water" to "ğŸ’§",
        "gas" to "ğŸ”¥",
        "internet" to "ğŸŒ",
        "wifi" to "ğŸ“¶",

        // Food-related
        "food" to EMOJI_FOOD,
        "groceries" to "ğŸ›’",
        "grocery" to "ğŸ›’",
        "restaurant" to "ğŸ½ï¸",
        "dining" to "ğŸ½ï¸",
        "takeout" to "ğŸ¥¡",
        "coffee" to "â˜•",

        // Transport-related
        "transport" to EMOJI_TRANSPORT,
        "transportation" to EMOJI_TRANSPORT,
        "travel" to "âœˆï¸",
        "gas" to "â›½",
        "fuel" to "â›½",
        "car" to "ğŸš—",
        "petrol" to "â›½",
        "bus" to "ğŸšŒ",
        "train" to "ğŸš†",
        "uber" to "ğŸš•",
        "taxi" to "ğŸš•",

        // Entertainment-related
        "entertainment" to EMOJI_ENTERTAINMENT,
        "recreation" to "ğŸ®",
        "movies" to EMOJI_ENTERTAINMENT,
        "games" to "ğŸ®",
        "fun" to "ğŸ‰",
        "hobby" to "ğŸ¨",
        "music" to "ğŸµ",
        "concert" to "ğŸ¤",
        "spotify" to "ğŸµ",
        "streaming" to "ğŸ“º",
        "netflix" to "ğŸ“º",

        // Shopping-related
        "shopping" to EMOJI_SHOPPING,
        "clothes" to "ğŸ‘š",
        "clothing" to "ğŸ‘š",
        "shoes" to "ğŸ‘Ÿ",
        "accessories" to "ğŸ‘œ",

        // Health-related
        "health" to EMOJI_HEALTH,
        "medical" to "ğŸ¥",
        "doctor" to "ğŸ‘¨â€âš•ï¸",
        "pharmacy" to EMOJI_HEALTH,
        "medicine" to EMOJI_HEALTH,
        "fitness" to "ğŸ‹ï¸",
        "gym" to "ğŸ‹ï¸",

        // Education-related
        "education" to "ğŸ“",
        "school" to "ğŸ«",
        "college" to "ğŸ“",
        "university" to "ğŸ“",
        "books" to "ğŸ“š",
        "courses" to "ğŸ“",
        "tuition" to "ğŸ“",

        // Income-related
        "income" to EMOJI_INCOME,
        "salary" to EMOJI_INCOME,
        "paycheck" to EMOJI_INCOME,
        "earnings" to EMOJI_INCOME,
        "wages" to EMOJI_INCOME,
        "dividends" to EMOJI_INCOME,
        "interest" to EMOJI_INCOME,
        "interest income" to EMOJI_INCOME,
        "bonus" to EMOJI_INCOME,

        // Others
        "pets" to "ğŸ¶",
        "subscriptions" to "ğŸ“±",
        "insurance" to "ğŸ›¡ï¸",
        "personal care" to "ğŸ’…",
        "savings" to "ğŸ’µ",
        "childcare" to "ğŸ§¸",
        "donations" to "ğŸ™",
        "gifts" to "ğŸ",

        // Catch-all
        "other" to EMOJI_OTHER,
        "miscellaneous" to EMOJI_OTHER,
        "misc" to EMOJI_OTHER
    )

    /**
     * Get emoji for a specific category with improved fuzzy matching.
     * This is the CENTRAL method to get category emojis - all code should use this method
     * rather than maintaining separate emoji mappings.
     *
     * @param category The category name to find an emoji for
     * @return The emoji string for the category, with fallback to default emoji
     */
    fun getCategoryEmoji(category: String): String {
        // Handle null or empty case
        if (category.isNullOrBlank()) {
            return EMOJI_UNKNOWN
        }

        // Normalize the category name
        val normalizedCategory = category.trim().lowercase()

        // Direct match first
        categoryEmojiMap[normalizedCategory]?.let { return it }

        // Try specific category constants for exact matches
        when (normalizedCategory) {
            "food", "food & drink" -> return EMOJI_FOOD
            "transport", "transportation" -> return EMOJI_TRANSPORT
            "housing", "rent", "home" -> return EMOJI_HOUSING
            "entertainment" -> return EMOJI_ENTERTAINMENT
            "shopping" -> return EMOJI_SHOPPING
            "health", "healthcare" -> return EMOJI_HEALTH
            "utilities" -> return EMOJI_UTILITIES
            "income" -> return EMOJI_INCOME
        }

        // Try to find a partial match if no direct match
        for ((key, emoji) in categoryEmojiMap) {
            if (normalizedCategory.contains(key) || key.contains(normalizedCategory)) {
                return emoji
            }
        }

        // Return default if no match found
        return EMOJI_UNKNOWN
    }

    /**
     * Get a standard display text with emoji prefix
     * Ensures consistent spacing between emoji and text
     *
     * @param category The category name
     * @return Formatted string with emoji and text
     */
    fun getEmojiCategoryText(category: String): String {
        val emoji = getCategoryEmoji(category)
        return "$emoji$EMOJI_TEXT_SPACING$category"
    }

    /**
     * Set emoji with text in a TextView, with consistent spacing
     */
    fun setEmojiText(textView: TextView, emoji: String, text: String) {
        textView.text = "$emoji$EMOJI_TEXT_SPACING$text"
    }

    /**
     * Set emoji for a category in a TextView
     */
    fun setCategoryWithEmoji(textView: TextView, category: String) {
        setEmojiText(textView, getCategoryEmoji(category), category)
    }

    /**
     * Get emoji for achievement badge
     */
    fun getAchievementEmoji(achievement: String): String {
        return when (achievement.lowercase()) {
            "saver", "budget master", "super saver" -> "ğŸ’°"
            "streak keeper" -> "ğŸ”¥"
            "transport", "transport pro" -> "ğŸš—"
            "food manager" -> "ğŸ½ï¸"
            "consistent", "daily logger" -> "ğŸ“…"
            "photographer" -> "ğŸ“¸"
            "housing pro" -> "ğŸ "
            "challenge master" -> "ğŸ†"
            "fun manager" -> "ğŸ¥"
            "investor" -> "ğŸ“ˆ"
            "tech wizard" -> "ğŸ’»"
            "budget guru" -> "ğŸ‘‘"
            else -> "ğŸ”’" // locked or unknown or coming soon
        }
    }

    /**
     * Get emoji for action button
     */
    fun getActionEmoji(action: String): String {
        return when (action.lowercase()) {
            "add" -> "â•"
            "edit" -> "âœï¸"
            "delete" -> "ğŸ—‘ï¸"
            else -> "âš™ï¸" // Default fallback emoji
        }
    }
}